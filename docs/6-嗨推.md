# 嗨推爬虫说明

## 签名说明

1. 假如body
    ```json
    {
      "phone": "13587021931",
      "type": 0,
      "pwd": "hxy197984"
    }
    ```
2. 按key排序拼接后得到字符串
    ```text
    phone=13587021931&pwd=hxy197984&type=0
    ```
3. 尾部增加固定key 61DE86C244CB3CAA33CA707A0A472677
   ```text
   phone=13587021931&pwd=hxy197984&type=0&key=61DE86C244CB3CAA33CA707A0A472677
   ```
4. md5后转换成大写，得到签名
   ```text
   E9D8DC5B534A9CCCA232D48F6A42680D
   ```
5. 拼到body里
    ```json
   {
       "phone": "13587021931",
       "type": 0,
       "pwd": "hxy197984",
       "sign": "E9D8DC5B534A9CCCA232D48F6A42680D"
   }
    ```

## 1. 登录

* url: https://mai.kaiguo.vip/api.php/user/login
* method: POST
* body
   ```json
   {
       "phone": "13587021931",
       "type": 0,
       "pwd": "hxy197984",
       "sign": "E9D8DC5B534A9CCCA232D48F6A42680D"
   }
   ```
* rsp
   需要在rsp里取出uid,token
   ```json
   {
       "code": 1,
       "msg": "登录成功",
       "time": "1680518786",
       "data": {
           "uid": 14647,
           "phone": "13587021931",
           "token": "6222646025514119",
           "update_book": 0
       }
   }
   ```
  
## 2. 平台列表
* url: https://mai.kaiguo.vip/api.php/platform/getList
* method: POST
* body
    ```json
    {
        "uid": 14647,
        "time": 1681370909,
        "sign": "8C9E7F46CC4364D3B77DCDFF190CA275"
    }
    ```
* rsp
    <details>
        <summary> rsp-json </summary>

    ```json
  {
      "code": 1,
      "msg": "列表获取成功",
      "time": "1681370910",
      "data": [{
          "id": 10,
          "name": "抖音",
          "ico": "\/static\/business\/image\/icon\/dy.png",
          "sort": 1,
          "task_num": 553,
          "status": 0
      }, {
          "id": 5,
          "name": "阿里巴巴",
          "ico": "\/static\/business\/image\/icon\/albb.png",
          "sort": 2,
          "task_num": 537,
          "status": 0
      }, {
          "id": 3,
          "name": "拼多多",
          "ico": "\/static\/business\/image\/icon\/pdd.png",
          "sort": 3,
          "task_num": 3320,
          "status": 0
      }, {
          "id": 2,
          "name": "京东",
          "ico": "\/static\/business\/image\/icon\/jd.png",
          "sort": 4,
          "task_num": 12295,
          "status": 0
      }, {
          "id": 1,
          "name": "淘宝",
          "ico": "\/static\/business\/image\/icon\/tb.png",
          "sort": 5,
          "task_num": 137963,
          "status": 0
      }]
  }
    ```
    </details>
  
## 3. 买号列表
* url: https://mai.kaiguo.vip/api.php/Member/getList
* method: POST
* body
  * pid 对应平台列表的id
  ```json
  {
      "uid": 14647,
      "pid": 1,
      "state": 1,
      "time": 1681371853,
      "sign": "EC16A4F7311A62CA8AAB975BE68718CA"
  }
  ```
* rsp
  ```json
  {
      "code": 1,
      "msg": "列表获取成功",
      "time": "1681371853",
      "data": {
          "total": 2,
          "per_page": 10,
          "current_page": 1,
          "last_page": 1,
          "data": [{
              "id": 44219,
              "accname": "泛黄回忆颜",
              "ico": "\/static\/business\/image\/icon\/tb.png",
              "status": 1
          }, {
              "id": 44218,
              "accname": "黄山清哈哈哈",
              "ico": "\/static\/business\/image\/icon\/tb.png",
              "status": 1
          }]
      }
  }
  ```
  
## 4. 接单
* url: https://mai.kaiguo.vip/api.php/task/receiving
* method: POST
* body
  * aids 为买号列表对应id
  * pid 为平台列表对应id
  * uid, token在登录里返回
  ```json
  {
      "aids": "44219",
      "pid": 1,
      "uid": 14647,
      "token": "6222646025514119",
      "sign": "817F07B784C212D2B37D947FA5C110D1"
  }
  ```
* rsp
  ```json
  {
      "code": 0,
      "msg": "暂无匹配订单",
      "time": "1680518861",
      "data": true
  }
  ```